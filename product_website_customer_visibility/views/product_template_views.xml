<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="product_template_customer_visibility_form" model="ir.ui.view">
        <field name="name">product.template.customer.visibility.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="website_sale.product_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='ecommerce']" position="inside">
                <group string="Visibilidad por cliente" name="customer_visibility">
                    <field name="visible_for_all_customers"/>
                    <field
                        name="allowed_partner_ids"
                        widget="many2many_tags"
                        options="{'no_create': False}"
                        attrs="{'invisible': [('visible_for_all_customers', '=', True)]}"
                        context="{'default_customer_rank': 1}"
                    />
                    <label
                        for="allowed_partner_ids"
                        class="oe_read_only"
                        attrs="{'invisible': [('visible_for_all_customers', '=', True)]}"
                    />
                </group>
            </xpath>
        </field>
    </record>
</odoo>
